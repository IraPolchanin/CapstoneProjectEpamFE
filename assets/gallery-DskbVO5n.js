function P(E){let i=[...E],c=1;const l=10;let v="default",f="all",g="all",d="";const b=document.getElementById("gallery-cards-container"),w=document.querySelector(".pagination__numbers"),m=document.getElementById("prev-page"),y=document.getElementById("next-page"),L=document.getElementById("load-more-btn");function C(e,t,r){const s=e.toLowerCase(),n=t.toLowerCase(),a=r.toLowerCase();i=E.filter(o=>{const h=s==="all"||o.topic.toLowerCase()===s,I=n==="all"||o.difficulty.toLowerCase()===n,M=[o.title,o.instructor?o.instructor.name:"",o.instructor?o.instructor.role:"",o.description,o.promotionalMessage].join(" ").toLowerCase(),A=a===""||M.includes(a);return h&&I&&A}),c=1}function _(e){switch(e){case"title-asc":i.sort((t,r)=>t.title.localeCompare(r.title));break;case"title-desc":i.sort((t,r)=>r.title.localeCompare(t.title));break;case"price-asc":i.sort((t,r)=>t.price-r.price);break;case"price-desc":i.sort((t,r)=>r.price-t.price);break;case"rating-desc":i.sort((t,r)=>r.rating-t.rating);break;default:i=[...E.filter(t=>{const r=f==="all"||t.topic.toLowerCase()===f,s=g==="all"||t.difficulty.toLowerCase()===g,n=[t.title,t.instructor?t.instructor.name:"",t.instructor?t.instructor.role:"",t.description,t.promotionalMessage].join(" ").toLowerCase(),a=d===""||n.includes(d);return r&&s&&a})];break}}function k(e){const t=document.createElement("a");t.classList.add("course-card-link"),t.href=`./courseDetail.html?courseId=${e.id}`;const r=document.createElement("div");return r.classList.add("course-card"),r.innerHTML=`
    <img class="course-card-image" src="${e.image}" alt="${e.title}" width="300" height="300" loading="lazy">
    <div class="course-card-info">
      <h2 class="course-card-title">${e.title}</h2>
      <p class="course-card-instructor">By: ${e.instructor.role} · ${e.instructor.name} </p>
      <p class="course-card-description">${e.description}</p>
      <p class="course-card-row">
        <span class="course-card-price">Total: ${e.price} ${e.currency}</span>
        <span class="course-card-rating"> ${e.rating} ★ </span>
      </p>
      <p class="course-card-row">
        <span class="course-card-topic">${e.topic}</span>
        <span class="course-card-difficulty">${e.difficulty}</span>
      </p>
    </div>
  `,t.appendChild(r),t}function u(e=!1){e||(b.innerHTML="");const t=(c-1)*l,r=t+l,s=i.slice(t,r);if(s.length===0&&!e){const n=document.createElement("div");n.classList.add("no-results"),n.textContent="No courses found matching your criteria.",b.appendChild(n)}else s.forEach(n=>{b.appendChild(k(n))});B(),T()}function B(){const e=Math.ceil(i.length/l);if(w){w.innerHTML="";for(let t=1;t<=e;t++){const r=document.createElement("button");r.textContent=t,r.classList.add("pagination__button","pagination__button--number"),t===c&&r.classList.add("active"),r.addEventListener("click",()=>{c=t,u()}),w.appendChild(r)}}}function T(){const e=Math.ceil(i.length/l);m&&(m.disabled=c===1),y&&(y.disabled=c===e||e===0),L&&(L.disabled=c===e||e===0)}function p(){C(f,g,d),_(v),u()}function x(){const e=document.getElementById("sort-dropdown");e&&e.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const a=n.target.getAttribute("data-sort"),o=document.querySelector("#sort-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Sort by: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),v=a,p()}});const t=document.getElementById("topic-dropdown");t&&t.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const a=n.target.getAttribute("data-filter"),o=document.querySelector("#topic-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Filter by Topic: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),f=a,p()}});const r=document.getElementById("difficulty-dropdown");r&&r.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const a=n.target.getAttribute("data-filter"),o=document.querySelector("#difficulty-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Filter by Difficulty: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),g=a,p()}}),document.querySelectorAll(".gallery-controls__dropdown-toggle").forEach(n=>{n.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),document.querySelectorAll(".gallery-controls__dropdown.open").forEach(h=>{h!==n.parentElement&&h.classList.remove("open")}),n.parentElement.classList.toggle("open");const o=n.parentElement.classList.contains("open");n.setAttribute("aria-expanded",o)})}),document.addEventListener("click",()=>{document.querySelectorAll(".gallery-controls__dropdown.open").forEach(n=>{n.classList.remove("open");const a=n.querySelector(".gallery-controls__dropdown-toggle");a&&a.setAttribute("aria-expanded","false")})})}function D(){const e=document.querySelector(".gallery-controls__search-form"),t=document.getElementById("search-courses");if(e&&t){t.addEventListener("input",()=>{t.value.trim()===""&&(d="",p())}),e.addEventListener("submit",s=>{s.preventDefault(),d=t.value.trim().toLowerCase(),p()});const r=document.getElementById("search-course-button");r&&r.addEventListener("click",s=>{s.preventDefault(),d=t.value.trim().toLowerCase(),p()})}}function $(){m&&m.addEventListener("click",()=>{c>1&&(c--,u())}),y&&y.addEventListener("click",()=>{const e=Math.ceil(i.length/l);c<e&&(c++,u())}),L&&L.addEventListener("click",()=>{const e=Math.ceil(i.length/l);c<e&&(c++,u(!0))})}function S(){x(),D(),$(),u()}S()}export{P as setupGallery};
