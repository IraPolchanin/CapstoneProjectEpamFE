function A(E){let s=[...E],i=1;const l=10;let v="default",f="all",g="all",d="";const b=document.getElementById("gallery-cards-container"),w=document.querySelector(".pagination__numbers"),m=document.getElementById("prev-page"),y=document.getElementById("next-page"),L=document.getElementById("load-more-btn");function C(e,t,r){const a=e.toLowerCase(),n=t.toLowerCase(),c=r.toLowerCase();s=E.filter(o=>{const h=a==="all"||o.topic.toLowerCase()===a,P=n==="all"||o.difficulty.toLowerCase()===n,S=[o.title,o.instructor?o.instructor.name:"",o.instructor?o.instructor.role:"",o.description,o.promotionalMessage].join(" ").toLowerCase(),M=c===""||S.includes(c);return h&&P&&M}),i=1}function _(e){switch(e){case"title-asc":s.sort((t,r)=>t.title.localeCompare(r.title));break;case"title-desc":s.sort((t,r)=>r.title.localeCompare(t.title));break;case"price-asc":s.sort((t,r)=>t.price-r.price);break;case"price-desc":s.sort((t,r)=>r.price-t.price);break;case"rating-desc":s.sort((t,r)=>r.rating-t.rating);break;default:s=[...E.filter(t=>{const r=f==="all"||t.topic.toLowerCase()===f,a=g==="all"||t.difficulty.toLowerCase()===g,n=[t.title,t.instructor?t.instructor.name:"",t.instructor?t.instructor.role:"",t.description,t.promotionalMessage].join(" ").toLowerCase(),c=d===""||n.includes(d);return r&&a&&c})];break}}function $(e){const t=document.createElement("a");t.classList.add("course-card-link");const r="/CapstoneProjectEpamFE/";t.href=`${r}pages/courseDetail.html?courseId=${e.id}`;const a=document.createElement("div");a.classList.add("course-card");const n=e.image.startsWith("/")?`${r}${e.image.slice(1)}`:`${r}${e.image}`;return a.innerHTML=`
    <img class="course-card-image" src="${n}" alt="${e.title}" width="300" height="300" loading="lazy">
    <div class="course-card-info">
      <h2 class="course-card-title">${e.title}</h2>
      <p class="course-card-instructor">By: ${e.instructor.role} · ${e.instructor.name} </p>
      <p class="course-card-description">${e.description}</p>
      <p class="course-card-row">
        <span class="course-card-price">Total: ${e.price} ${e.currency}</span>
        <span class="course-card-rating"> ${e.rating} ★ </span>
      </p>
      <p class="course-card-row">
        <span class="course-card-topic">${e.topic}</span>
        <span class="course-card-difficulty">${e.difficulty}</span>
      </p>
    </div>
  `,t.appendChild(a),t}function u(e=!1){e||(b.innerHTML="");const t=(i-1)*l,r=t+l,a=s.slice(t,r);if(a.length===0&&!e){const n=document.createElement("div");n.classList.add("no-results"),n.textContent="No courses found matching your criteria.",b.appendChild(n)}else a.forEach(n=>{b.appendChild($(n))});k(),x()}function k(){const e=Math.ceil(s.length/l);if(w){w.innerHTML="";for(let t=1;t<=e;t++){const r=document.createElement("button");r.textContent=t,r.classList.add("pagination__button","pagination__button--number"),t===i&&r.classList.add("active"),r.addEventListener("click",()=>{i=t,u()}),w.appendChild(r)}}}function x(){const e=Math.ceil(s.length/l);m&&(m.disabled=i===1),y&&(y.disabled=i===e||e===0),L&&(L.disabled=i===e||e===0)}function p(){C(f,g,d),_(v),u()}function B(){const e=document.getElementById("sort-dropdown");e&&e.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const c=n.target.getAttribute("data-sort"),o=document.querySelector("#sort-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Sort by: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),v=c,p()}});const t=document.getElementById("topic-dropdown");t&&t.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const c=n.target.getAttribute("data-filter"),o=document.querySelector("#topic-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Filter by Topic: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),f=c,p()}});const r=document.getElementById("difficulty-dropdown");r&&r.addEventListener("click",n=>{if(n.target.tagName==="A"){n.preventDefault();const c=n.target.getAttribute("data-filter"),o=document.querySelector("#difficulty-filter .gallery-controls__dropdown-toggle");o&&(o.innerHTML=`Filter by Difficulty: ${n.target.textContent} <span class="gallery-controls__caret"></span>`),g=c,p()}}),document.querySelectorAll(".gallery-controls__dropdown-toggle").forEach(n=>{n.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),document.querySelectorAll(".gallery-controls__dropdown.open").forEach(h=>{h!==n.parentElement&&h.classList.remove("open")}),n.parentElement.classList.toggle("open");const o=n.parentElement.classList.contains("open");n.setAttribute("aria-expanded",o)})}),document.addEventListener("click",()=>{document.querySelectorAll(".gallery-controls__dropdown.open").forEach(n=>{n.classList.remove("open");const c=n.querySelector(".gallery-controls__dropdown-toggle");c&&c.setAttribute("aria-expanded","false")})})}function T(){const e=document.querySelector(".gallery-controls__search-form"),t=document.getElementById("search-courses");if(e&&t){t.addEventListener("input",()=>{t.value.trim()===""&&(d="",p())}),e.addEventListener("submit",a=>{a.preventDefault(),d=t.value.trim().toLowerCase(),p()});const r=document.getElementById("search-course-button");r&&r.addEventListener("click",a=>{a.preventDefault(),d=t.value.trim().toLowerCase(),p()})}}function D(){m&&m.addEventListener("click",()=>{i>1&&(i--,u())}),y&&y.addEventListener("click",()=>{const e=Math.ceil(s.length/l);i<e&&(i++,u())}),L&&L.addEventListener("click",()=>{const e=Math.ceil(s.length/l);i<e&&(i++,u(!0))})}function I(){B(),T(),D(),u()}I()}export{A as setupGallery};
